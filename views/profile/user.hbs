
<div class="profile">

<div id="profile-menu">  {{!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - -> PROFILE MENU <- --}}

    
    <div class="profpic"> {{!-- - - - - - - - - - - - - - - - - - - - - - - - - -> user profile picture <- --}}
      <img src="{{ user.photo }}" alt="profile-pic" id="pic">
    </div>

    
  <div class="buttons"> {{!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -> buttons <- --}}
    <h3>Welcome back, {{ user.name }}.</h3>
    <section class="menu">
      {{#if isMyOwnMyProfile}}
      <a href="/moment/create">Create Moment</a><br>
      <a href="/profile/edit">Update Profile</a>
      <a href="/profile/view-all">View All</a>
      <a href="/profile/placeholder">Show more</a>
    </section>
     {{/if}}
  </div>
</div>


<div id="section-map"> {{!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - -> MAP SECTION <- --}}

   {{!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  -> moment filter <- --}}
  <div class="flex-column">
      <p>Your moments</p>     
        <select name="moment-filter">
        <option type="text"  value="Amused"> Last Week </option>
        <option type="text"  value="Anxious"> Last Month </option>
        <option type="text"  value="Brave">  Last Year </option>
        </select>
  </div>


  <div id="map-container"> {{!-- - - - - - - - - - - - - - - - - - - - - - - - -  -> functionality <- --}}
    <script>
          function init () {
              const mapContainerElement = document.getElementById('map-container');
              const map = new window.google.maps.Map(mapContainerElement, {
              center: {
                lat: 38.75,
                lng: -9.15
              },
              zoom: 11
              });
      
        const moments = {{{ json moment }}};

        for (let moment of moments) {
              const marker = new window.google.maps.Marker({
                map,
                position: {
                  lat: moment.location.coordinates[0],
                  lng: moment.location.coordinates[1]
                }
              
              });
              marker.addListener('click', () => {
                const endpoint = `/moment/${ moment._id }`;
                window.location = endpoint;
              });
            }
        }
        </script>
        {{> mapscript}}
  </div>
</div>

<div class="section">

    {{#each moments}}
      {{> moment}}
      {{/each}}

</div>











  







  





